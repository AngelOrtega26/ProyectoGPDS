<div class="container-fluid vh-100">
    <div class="row m-5">
        <p-toast></p-toast>
        <div class="col-12 text-center">
            <h1>Gesti칩n de Usuarios</h1>
        </div>
    </div>

    <!-- Bot칩n para agregar nuevo usuario -->
    <div class="row mb-4">
        <div class="col-12 d-flex justify-content-between">
            <button (click)="logout()" class="btn btn-danger">Regresar al login</button>
            <button class="btn btn-primary" (click)="showCreateUserModal()">Agregar Usuario</button>
        </div>
    </div>

    <!-- Tabla de usuarios -->
    <div class="row">
        <div class="col-12">
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Nombre</th>
                        <th>Apellido</th>
                        <th>Correo Electr칩nico</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let user of users; let i = index">
                        <td>{{ i + 1 }}</td>
                        <td>{{ user.nombre }}</td>
                        <td>{{ user.apellido }}</td>
                        <td>{{ user.correo }}</td>
                        <td>
                            <button class="btn btn-warning btn-sm me-2" (click)="showEditUserModal(user)">Editar</button>
                            <button class="btn btn-danger btn-sm" (click)="onDeleteUser(user)">Eliminar</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Modal para Crear Usuario -->
    <p-dialog header="Agregar Usuario" [(visible)]="showModal" [modal]="true" [closable]="true" [style]="{ width: '400px' }" [header]="isEditing ? 'Editar Usuario' : 'Agregar Usuario'">
        <form (ngSubmit)="createOrUpdate()">
            <div class="p-fluid">
                <div class="p-field">
                    <label for="nombre">Nombre</label>
                    <input id="nombre" type="text" pInputText [(ngModel)]="currentUser.nombre" name="nombre" required />
                </div>
                <div class="p-field">
                    <label for="apellido">Apellido</label>
                    <input id="apellido" type="text" pInputText [(ngModel)]="currentUser.apellido" name="apellido" required />
                </div>
                <div class="p-field">
                    <label for="correo">Correo</label>
                    <input id="correo" type="email" pInputText [(ngModel)]="currentUser.correo" name="correo" required />
                </div>
                <div class="p-field">
                    <label for="password">Contrase침a</label>
                    <input id="contrasena" type="password" pInputText [(ngModel)]="currentUser.contrasena" name="contrasena" required />
                </div>
            </div>
            <div class="p-dialog-footer pt-5">
                <button pButton type="submit" label="Guardar" icon="pi pi-check" class="p-button-success"></button>
                <button pButton type="button" label="Cancelar" icon="pi pi-times" class="p-button-secondary" (click)="showModal = false"></button>
            </div>
        </form>
    </p-dialog>

</div>
